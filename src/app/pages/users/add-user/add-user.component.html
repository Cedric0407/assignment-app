<mat-card>
  <mat-card-header><h1>Ajouter un utilisateur</h1></mat-card-header>
  <mat-card-content>
    <div class="mat-elevation-z8">
      <form
        [formGroup]="userForm"
        (ngSubmit)="onSubmit()"
        enctype="multipart/form-data"
      >
        <div class="form-group">
          <mat-form-field appearance="fill">
            <mat-label>Email</mat-label>
            <input matInput formControlName="email" required />
            <mat-error
              *ngIf="
                userForm.get('email')?.invalid && userForm.get('email')?.touched
              "
            >
              Email is required.
            </mat-error>
          </mat-form-field>
        </div>

        <div class="form-group">
          <mat-form-field appearance="fill">
            <mat-label>Name</mat-label>
            <input matInput formControlName="name" required />
            <mat-error
              *ngIf="
                userForm.get('name')?.invalid && userForm.get('name')?.touched
              "
            >
              Name is required.
            </mat-error>
          </mat-form-field>
        </div>

        <div class="form-group">
          <div class="mat-mdc-form-field">
            <mat-label>Image Path</mat-label>
            <input
              type="file"
              formControlName="imageFile"
              required
              (change)="onImageSelected($event)"
              accept="image/*"
            />
            <mat-error
              *ngIf="
                userForm.get('imageFile')?.invalid &&
                userForm.get('imageFile')?.touched
              "
            >
              Image Path is required.
            </mat-error>
          </div>
        </div>

        <div class="form-group">
          <mat-form-field appearance="fill">
            <mat-label>Role</mat-label>
            <mat-select formControlName="role" required>
              <mat-option value="etudiant">Etudiant</mat-option>
              <mat-option value="professeur">Professeur</mat-option>
            </mat-select>
            <mat-error
              *ngIf="
                userForm.get('role')?.invalid && userForm.get('role')?.touched
              "
            >
              Role is required.
            </mat-error>
          </mat-form-field>
        </div>
        <div class="footer">
          <button
            mat-raised-button
            color="primary"
            type="submit"
            class="btn-action"
            [disabled]="userForm.invalid || isLoading"
          >
            Ajouter
          </button>
        </div>
      </form>
    </div>
  </mat-card-content>
</mat-card>
